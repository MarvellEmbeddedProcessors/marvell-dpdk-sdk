From 71677ff503e61d0b9387e53e66897eba403e6a92 Mon Sep 17 00:00:00 2001
From: Ashwin Sekhar T K <asekhar@marvell.com>
Date: Thu, 15 Dec 2022 19:28:48 +0530
Subject: [PATCH] enable cross compilation

Signed-off-by: Ashwin Sekhar T K <asekhar@marvell.com>
---
 lib/Makefile | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/lib/Makefile b/lib/Makefile
index 4168b45..5aa4271 100644
--- a/lib/Makefile
+++ b/lib/Makefile
@@ -781,11 +781,14 @@ install: $(LIB_DIR)/$(LIBNAME)
 	install -m 0444 $(MAN2) $(MAN_DIR)
 	install -d $(LIB_INSTALL_DIR)
 ifeq ($(SHARED),y)
-	install -s -m $(LIBPERM) $(LIB_DIR)/$(LIBNAME) $(LIB_INSTALL_DIR)
+	install -s --strip-program=aarch64-marvell-linux-gnu-strip -m $(LIBPERM) \
+		$(LIB_DIR)/$(LIBNAME) $(LIB_INSTALL_DIR)
 else
 	# must not strip symbol table for static libs
 	install -m $(LIBPERM) $(LIB_DIR)/$(LIBNAME) $(LIB_INSTALL_DIR)
 endif
+	cd $(HDR_DIR); \
+		ln -f -s $(IMB_HDR) intel-ipsec-mb.h
 ifeq ($(SHARED),y)
 	cd $(LIB_INSTALL_DIR); \
 		ln -f -s $(LIB).so.$(VERSION) $(LIB).so.$(SO_VERSION); \
-- 
2.25.1

